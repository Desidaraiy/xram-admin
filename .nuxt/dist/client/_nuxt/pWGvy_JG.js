import{a as y,_ as k}from"./DTQ49aZk.js";import{_ as v}from"./B8F8NKH2.js";import{_ as B}from"./byDhHAzm.js";import{f as w,i as b,z as $,c,b as s,w as i,_ as j,o as a,k as S,H as C,F as L,A as T,C as A,a as e,t as r,q as N}from"./DSqohS_p.js";import{_ as D}from"./C2qxqNzf.js";import"./C3z8ikX4.js";import"./DYukAyPS.js";const F={key:0,class:"grid grid-cols-1 gap-6 lg:grid-cols-3 mb-6"},M=["src","alt"],P={class:"text-xl text-gray-700 dark:text-gray-300 my-2"},U={class:"flex flex-row justify-between my-5 items-center"},V=e("p",null,"Миниатюра:",-1),q=["src","alt"],z={key:1,class:"flex flex-col h-192 items-center justify-center"},E=e("h2",{class:"text-xl text-gray-700 dark:text-gray-300 my-2"},"Нет объявлений",-1),H=[E],Y={__name:"index",setup(I){const l=w();b(()=>{l.getAdvertsList()});const _=$(()=>l.adverts);function d(n){return n.match(/\.(jpeg|jpg|gif|png)$/)!=null}function u(n){return n.split(" ")[0]}const p=async n=>{const m=N+"remove-advertising";$fetch(m,{method:"POST",body:{token:l.userToken,advertising_id:n}}).then(o=>{o.message==="ok"?l.getAdvertsList():alert("Ошибка: ",o)})};return(n,m)=>{const o=y,f=v,g=B,h=k,x=j;return a(),c("div",null,[s(x,{name:"authenticated"},{default:i(()=>[s(D,null,{default:i(()=>[s(f,{icon:S(C),title:"Управление рекламой",main:""},{default:i(()=>[s(o,{color:"info",label:"Добавить рекламу",to:"advertising/new"})]),_:1},8,["icon"]),_.value.length>0?(a(),c("div",F,[(a(!0),c(L,null,T(_.value,t=>(a(),A(h,{key:t.advertising_id},{default:i(()=>[e("img",{src:d(t.picture)?t.picture:"https://via.placeholder.com/1080x1920?text=Нет изображения",class:"h-64 w-full object-cover",alt:t.id},null,8,M),e("h2",P,r(t.title),1),e("p",null,r(t.text.length<0?"Текст объявления пуст":t.text),1),e("p",null,"Дата старта: "+r(u(t.date_start)),1),e("p",null,"Дата окончания: "+r(u(t.date_end)),1),e("div",U,[V,e("img",{src:d(t.preview)?t.preview:"https://via.placeholder.com/500x500?text=Нет миниатюры",class:"rounded-md h-24 w-24 object-cover",alt:t.advertising_id},null,8,q)]),s(g,null,{default:i(()=>[s(o,{label:"Удалить",color:"warning",small:"",outline:"",onClick:O=>p(t.advertising_id)},null,8,["onClick"]),s(o,{label:"Редактировать",color:"info",small:"",outline:"",to:`/advertising/edit/${t.advertising_id}`},null,8,["to"])]),_:2},1024)]),_:2},1024))),128))])):(a(),c("div",z,H))]),_:1})]),_:1})])}}};export{Y as default};
