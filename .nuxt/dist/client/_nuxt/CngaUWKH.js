import{aa as Y,am as S,an as G,ao as X,o as a,c as v,J as o,z as y,al as Z,y as M,f as N,j as $,i as ee,af as te,C as k,w as A,a as c,B as _,t as L,k as t,K as le,L as se,b as m,a7 as F,A as U,F as V,P as z,Q as P,ap as ne,l as B,ak as O,aq as q,ar as j,n as H,ac as R,d as ae,s as ie,a8 as oe,x as re,as as ue,at as ce,au as de,av as me}from"./DSqohS_p.js";import{_ as w,h as fe}from"./DYukAyPS.js";import{_ as ve}from"./C3z8ikX4.js";import{_ as ge}from"./BZ2oriIC.js";import{_ as pe}from"./T45vWLzi.js";const ke=[{isCurrentUser:!0,menu:[{icon:Y,label:"Администраторы",to:"/admins"},{isDivider:!0},{icon:S,label:"Выйти",isLogout:!0}]},{icon:G,label:"Темная/Светлая тема",isDesktopNoLabel:!0,isToggleLightDark:!0},{icon:S,label:"Выйти",isDesktopNoLabel:!0,isLogout:!0}],I=X("layout",{state:()=>({isAsideMobileExpanded:!1,isAsideLgActive:!1}),actions:{asideMobileToggle(){this.isAsideMobileExpanded=!this.isAsideMobileExpanded}}}),he={__name:"BaseDivider",props:{navBar:Boolean},setup(e){const r=e;return(n,d)=>(a(),v("hr",{class:o([r.navBar?"hidden lg:block lg:my-0.5 dark:border-slate-700":"my-6 -mx-6 dark:border-slate-800","border-t border-gray-100"])},null,2))}},xe={__name:"NavBarItem",props:{item:{type:Object,required:!0}},emits:["menu-click"],setup(e,{emit:r}){const n=e,d=r,l=y(()=>n.item.href?"a":n.item.to?Z:"div"),s=M(),i=y(()=>{const b=[u.value?`${s.navBarItemLabelActiveColorStyle} dark:text-slate-400`:`${s.navBarItemLabelStyle} dark:text-white dark:hover:text-slate-400 ${s.navBarItemLabelHoverStyle}`,n.item.menu?"lg:py-2 lg:px-3":"py-2 px-3"];return n.item.isDesktopNoLabel&&b.push("lg:w-16","lg:justify-center"),b}),f=y(()=>n.item.isCurrentUser?N().userName:n.item.label),u=$(!1),h=b=>{d("menu-click",b,n.item),n.item.menu&&(u.value=!u.value)},g=(b,D)=>{d("menu-click",b,D)},x=$(null),C=b=>{x.value&&!x.value.contains(b.target)&&(u.value=!1)};return ee(()=>{n.item.menu&&window.addEventListener("click",C)}),te(()=>{n.item.menu&&window.removeEventListener("click",C)}),(b,D)=>e.item.isDivider?(a(),k(he,{key:0,"nav-bar":""})):(a(),k(F(l.value),{key:1,ref_key:"root",ref:x,class:o(["block lg:flex items-center relative cursor-pointer",i.value]),to:e.item.to??null,href:e.item.href??null,onClick:h},{default:A(()=>[c("div",{class:o(["flex items-center",{"bg-gray-100 dark:bg-slate-800 lg:bg-transparent lg:dark:bg-transparent p-3 lg:p-0":e.item.menu}])},[e.item.icon?(a(),k(w,{key:0,path:e.item.icon,class:"transition-colors"},null,8,["path"])):_("",!0),c("span",{class:o(["px-2 transition-colors",{"lg:hidden":e.item.isDesktopNoLabel&&e.item.icon}])},L(f.value),3),e.item.menu?(a(),k(w,{key:1,path:u.value?t(le):t(se),class:"hidden lg:inline-flex transition-colors"},null,8,["path"])):_("",!0)],2),e.item.menu?(a(),v("div",{key:0,class:o(["text-sm border-b border-gray-100 lg:border lg:bg-white lg:absolute lg:top-full lg:left-0 lg:min-w-full lg:z-20 lg:rounded-lg lg:shadow-lg lg:dark:bg-slate-800 dark:border-slate-700",{"lg:hidden":!u.value}])},[m(J,{menu:e.item.menu,onMenuClick:g},null,8,["menu"])],2)):_("",!0)]),_:1},8,["class","to","href"]))}},J={__name:"NavBarMenuList",props:{menu:{type:Array,default:()=>[]}},emits:["menu-click"],setup(e,{emit:r}){const n=r,d=(l,s)=>{n("menu-click",l,s)};return(l,s)=>(a(!0),v(V,null,U(e.menu,(i,f)=>(a(),k(xe,{key:f,item:i,onMenuClick:d},null,8,["item"]))),128))}},E={__name:"NavBarItemPlain",props:{display:{type:String,default:"flex"},useMargin:Boolean},setup(e){const r=M();return(n,d)=>(a(),v("div",{class:o([[e.display,t(r).navBarItemLabelStyle,t(r).navBarItemLabelHoverStyle,e.useMargin?"my-2 mx-3":"py-2 px-3"],"items-center cursor-pointer dark:text-white dark:hover:text-slate-400"])},[z(n.$slots,"default")],2))}},be={class:"top-0 inset-x-0 fixed bg-gray-50 h-14 z-30 transition-position w-screen lg:w-auto dark:bg-slate-800"},ye={class:"flex flex-1 items-stretch h-14"},we={class:"flex-none items-stretch flex h-14 lg:hidden"},_e={__name:"NavBar",props:{menu:{type:Array,required:!0}},emits:["menu-click"],setup(e,{emit:r}){const n=r,d=(s,i)=>{n("menu-click",s,i)},l=$(!1);return(s,i)=>(a(),v("nav",be,[c("div",{class:o(["flex lg:items-stretch",t(O)])},[c("div",ye,[z(s.$slots,"default")]),c("div",we,[m(E,{onClick:i[0]||(i[0]=B(f=>l.value=!l.value,["prevent"]))},{default:A(()=>[m(w,{path:l.value?t(P):t(ne),size:"24"},null,8,["path"])]),_:1})]),c("div",{class:o(["max-h-screen-menu overflow-y-auto lg:overflow-visible absolute w-screen top-14 left-0 bg-gray-50 shadow-lg lg:w-auto lg:flex lg:static lg:shadow-none dark:bg-slate-800",[l.value?"block":"hidden"]])},[m(J,{menu:e.menu,onMenuClick:d},null,8,["menu"])],2)],2)]))}},Ae={key:1},Ce={key:0,class:"flex flex-col items-center justify-center rounded-full bg-red-500 h-6 p-2"},Le={class:"text-xs font-bold text-white"},K={__name:"AsideMenuItem",props:{item:{type:Object,required:!0},isDropdownList:Boolean},emits:["menu-click"],setup(e,{emit:r}){const n=N(),d=y(()=>n.allUnreadMessagesCount),l=e,s=r,i=M(),f=y(()=>l.item&&l.item.color),u=y(()=>f.value?"":i.asideMenuItemActiveStyle),h=$(!1),g=y(()=>[l.isDropdownList?"py-3 px-6 text-sm":"py-3",f.value?fe(l.item.color,!1,!0):i.asideMenuItemStyle]),x=y(()=>!!l.item.menu),C=b=>{s("menu-click",b,l.item),x.value&&(h.value=!h.value)};return(b,D)=>{const W=ve;return a(),v("li",null,[e.item.to?(a(),k(W,{key:0,to:e.item.to??null,target:e.item.target??null,class:o(["flex cursor-pointer dark:text-slate-300 dark:hover:text-white",g.value]),onClick:C},{default:A(p=>[e.item.icon?(a(),k(w,{key:0,path:e.item.icon,class:o(["flex-none",[p&&p.isExactActive?u.value:""]]),w:"w-16",size:18},null,8,["path","class"])):_("",!0),c("span",{class:o(["grow text-ellipsis line-clamp-1",[{"pr-12":!x.value},p&&p.isExactActive?u.value:""]])},L(e.item.label),3),e.item.label=="Чаты"?(a(),v("div",Ae,[d.value>0?(a(),v("div",Ce,[c("span",Le,L(d.value),1)])):_("",!0)])):_("",!0),x.value?(a(),k(w,{key:2,path:h.value?t(q):t(j),class:o(["flex-none",[p&&p.isExactActive?u.value:""]]),w:"w-12"},null,8,["path","class"])):_("",!0)]),_:1},8,["to","target","class"])):(a(),k(F("a"),{key:1,to:e.item.to??null,href:e.item.href??null,target:e.item.target??null,class:o(["flex cursor-pointer dark:text-slate-300 dark:hover:text-white",g.value]),onClick:C},{default:A(p=>[e.item.icon?(a(),k(w,{key:0,path:e.item.icon,class:o(["flex-none",[p&&p.isExactActive?u.value:""]]),w:"w-16",size:18},null,8,["path","class"])):_("",!0),c("span",{class:o(["grow text-ellipsis line-clamp-1",[{"pr-12":!x.value},p&&p.isExactActive?u.value:""]])},L(e.item.label),3),x.value?(a(),k(w,{key:1,path:h.value?t(q):t(j),class:o(["flex-none",[p&&p.isExactActive?u.value:""]]),w:"w-12"},null,8,["path","class"])):_("",!0)]),_:1},8,["to","href","target","class"])),x.value?(a(),k(Q,{key:2,menu:e.item.menu,class:o([t(i).asideMenuDropdownStyle,h.value?"block dark:bg-slate-800/50":"hidden"]),"is-dropdown-list":""},null,8,["menu","class"])):_("",!0)])}}},Q={__name:"AsideMenuList",props:{isDropdownList:Boolean,menu:{type:Array,required:!0}},emits:["menu-click"],setup(e,{emit:r}){const n=r,d=(l,s)=>{n("menu-click",l,s)};return(l,s)=>(a(),v("ul",null,[(a(!0),v(V,null,U(e.menu,(i,f)=>(a(),k(K,{key:f,item:i,"is-dropdown-list":e.isDropdownList,onMenuClick:d},null,8,["item","is-dropdown-list"]))),128))]))}},Me={id:"aside",class:"lg:py-2 lg:pl-2 w-60 fixed flex z-40 top-0 h-screen transition-position overflow-hidden"},$e=c("div",{class:"text-center flex-1 lg:text-left lg:pl-6 xl:text-center xl:pl-0"},[c("b",{class:"font-black"},"Телеос-1")],-1),Be={__name:"AsideMenuLayer",props:{menu:{type:Array,required:!0}},emits:["menu-click"],setup(e,{emit:r}){const n=r,d=I(),l=M(),s=y(()=>({label:"Выйти",icon:S,color:"info",isLogout:!0})),i=(f,u)=>{n("menu-click",f,u)};return(f,u)=>(a(),v("aside",Me,[c("div",{class:o([t(l).asideStyle,"lg:rounded-xl flex-1 flex flex-col overflow-hidden dark:bg-slate-900"])},[c("div",{class:o([t(l).asideBrandStyle,"flex flex-row h-14 items-center justify-between bg-blue-500 dark:bg-blue-500"])},[$e,c("button",{class:"hidden lg:inline-block xl:hidden p-3",onClick:u[0]||(u[0]=B(h=>t(d).isAsideLgActive=!1,["prevent"]))},[m(w,{path:t(P)},null,8,["path"])])],2),c("div",{class:o([t(l).darkMode?"aside-scrollbars-[slate]":t(l).asideScrollbarsStyle,"flex-1 overflow-y-auto overflow-x-hidden"])},[m(Q,{menu:e.menu,onMenuClick:i},null,8,["menu"])],2),c("ul",null,[m(K,{item:s.value,onMenuClick:i},null,8,["item"])])],2)]))}},De={__name:"AsideMenu",props:{menu:{type:Array,required:!0}},emits:["menu-click"],setup(e,{emit:r}){const n=r,d=(s,i)=>{n("menu-click",s,i)},l=I();return(s,i)=>(a(),v("div",null,[m(Be,{menu:e.menu,class:o([t(l).isAsideMobileExpanded?"left-0":"-left-60 lg:left-0",{"lg:hidden xl:flex":!t(l).isAsideLgActive}]),onMenuClick:d},null,8,["menu","class"]),H(m(ge,{"z-index":"z-30",onOverlayClick:i[0]||(i[0]=f=>t(l).isAsideLgActive=!1)},null,512),[[R,t(l).isAsideLgActive]])]))}},Se={class:"text-center md:text-left"},Ee=c("a",{href:"https://pushmobile.ru/",target:"_blank"},"pushmobile.ru",-1),Ne={__name:"FooterBar",setup(e){const r=y(()=>new Date().getFullYear());return(n,d)=>(a(),v("footer",{class:o(["py-2 px-6",t(O)])},[m(pe,null,{default:A(()=>[c("div",Se,[c("b",null,[ae("©"+L(r.value)+", ",1),Ee])])]),_:1})],2))}},ze={class:"loading-overlay"},T="xl:pl-60",Ue={__name:"authenticated",setup(e){const r=N(),n=ie(re,{sameSite:"None",secure:!0}),d=y(()=>r.layoutIsLoadingisLoading),l=M(),s=I(),i=oe();i.beforeEach((h,g)=>{s.isAsideMobileExpanded=!1,s.isAsideLgActive=!1});const f=y(()=>r.allowedNavigation),u=(h,g)=>{g.isToggleLightDark&&l.setDarkMode(),g.isLogout&&(n.value="",i.push({name:"login"}))};return(h,g)=>(a(),v("div",{class:o({dark:t(l).darkMode,"overflow-hidden lg:overflow-visible":t(s).isAsideMobileExpanded})},[H(c("div",ze,[m(w,{path:t(ue),size:"48",class:"loading-icon"},null,8,["path"])],512),[[R,d.value]]),c("div",{class:o([[T,{"ml-60 lg:ml-0":t(s).isAsideMobileExpanded}],"pt-14 min-h-screen w-screen transition-position lg:w-auto bg-gray-50 dark:bg-slate-800 dark:text-slate-100"])},[m(_e,{menu:t(ke),class:o([T,{"ml-60 lg:ml-0":t(s).isAsideMobileExpanded}]),onMenuClick:u},{default:A(()=>[m(E,{display:"flex lg:hidden",onClick:g[0]||(g[0]=B(x=>t(s).asideMobileToggle(),["prevent"]))},{default:A(()=>[m(w,{path:t(s).isAsideMobileExpanded?t(ce):t(de),size:"24"},null,8,["path"])]),_:1}),m(E,{display:"hidden lg:flex xl:hidden",onClick:g[1]||(g[1]=B(x=>t(s).isAsideLgActive=!0,["prevent"]))},{default:A(()=>[m(w,{path:t(me),size:"24"},null,8,["path"])]),_:1})]),_:1},8,["menu","class"]),m(De,{menu:f.value,onMenuClick:u},null,8,["menu"]),z(h.$slots,"default"),m(Ne)],2)],2))}};export{Ue as default};
