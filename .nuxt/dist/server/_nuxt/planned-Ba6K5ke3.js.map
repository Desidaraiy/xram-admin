{"version":3,"file":"planned-Ba6K5ke3.js","sources":["../../../../pages/pushmailing/planned.vue"],"sourcesContent":["<script setup>\nimport { computed, onMounted } from 'vue'\nimport { useMainStore } from '@/stores/main'\nimport {\n    mdiChevronLeft\n} from '@mdi/js'\n\nimport SectionMain from '@/components/SectionMain.vue'\nimport { proxyBaseUrl } from '~~/configs/fetchBaseUrl';\n\nconst mainStore = useMainStore()\n\nonMounted(() => {\n  mainStore.getPlannedPushmailingList()\n})\nconst mailing = computed(() => mainStore.pushmailing)\nfunction dateTimeToDate(dateTime){\n  return dateTime.split(' ')[0]\n}\n\nfunction dateTimeToTime(dateTime){\n  return dateTime.split(' ')[1]\n}\n\n\nconst deleteById = async (id) => {\n\n  const path = proxyBaseUrl+\"remove-message\"\n\n  $fetch(path, {\n    method: \"POST\",\n    body: {\n      token: mainStore.userToken,\n      id: id\n    },\n  }).then((r) => {\n    if (r.message === \"ok\") {\n      mainStore.getPlannedPushmailingList();\n    } else {\n      alert(\"Ошибка: \", r);\n    }\n  });\n\n}\n\n</script>\n\n<template>\n  <div>\n    <NuxtLayout name=\"authenticated\">\n      <SectionMain>\n\n        <SectionTitleLine\n            :icon=\"mdiChevronLeft\"\n            title=\"Запланированные рассылки\"\n            :back=\"true\"\n            main\n        >\n        </SectionTitleLine>\n\n      <div v-if=\"mailing.length > 0\" class=\"grid grid-cols-1 gap-6 lg:grid-cols-3 mb-6\">\n        <CardBox\n          v-for=\"mail in mailing\"\n          :key=\"mail.id\">\n            <h2 v-if=\"mail.title\" class=\"text-xl text-gray-700 dark:text-gray-300 my-2\">Заголовок: {{ mail.title }}</h2>\n            <p class=\"my-2\">Сообщение: {{ mail.length < 0 ? 'Текст объявления пуст' : mail.message }}</p>\n            <div v-if=\"mail.date.split('-')[0] != '0000'\">\n              <p class=\"my-2\">Дата: {{ dateTimeToDate(mail.date) }}</p>\n              <p class=\"my-2\">Время: {{ dateTimeToTime(mail.date) }}</p>\n            </div>\n            <div v-else class=\"my-2\">\n              Без даты\n            </div>\n\n            <BaseButtons>\n              <BaseButton label=\"Удалить\" color=\"warning\" small outline @click=\"deleteById(mail.id)\" />\n              <BaseButton label=\"Редактировать\" color=\"info\" small outline :to=\"`/pushmailing/edit/${mail.id}`\" />\n            </BaseButtons>\n        </CardBox>\n      </div>\n      <div v-else class=\"flex flex-col h-192 items-center justify-center\">\n        <h2 class=\"text-xl text-gray-700 dark:text-gray-300 my-2\">Нет рассылок</h2>\n        <BaseButton color=\"info\" label=\"Создать рассылку\" to=\"/pushmailing/\" />\n      </div>\n    </SectionMain>\n    </NuxtLayout>\n  </div>\n\n</template>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,UAAM,YAAY,aAAc;AAKhC,UAAM,UAAU,SAAS,MAAM,UAAU,WAAW;AACpD,aAAS,eAAe,UAAS;AAC/B,aAAO,SAAS,MAAM,GAAG,EAAE,CAAC;AAAA,IAC9B;AAEA,aAAS,eAAe,UAAS;AAC/B,aAAO,SAAS,MAAM,GAAG,EAAE,CAAC;AAAA,IAC9B;AAGA,UAAM,aAAa,OAAO,OAAO;AAE/B,YAAM,OAAO,eAAa;AAE1B,aAAO,MAAM;AAAA,QACX,QAAQ;AAAA,QACR,MAAM;AAAA,UACJ,OAAO,UAAU;AAAA,UACjB;AAAA,QACD;AAAA,MACL,CAAG,EAAE,KAAK,CAAC,MAAM;AACb,YAAI,EAAE,YAAY,MAAM;AACtB,oBAAU,0BAAyB;AAAA,QACzC,OAAW;AACL,gBAAM,YAAY,CAAC;AAAA,QACpB;AAAA,MACL,CAAG;AAAA,IAEH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}